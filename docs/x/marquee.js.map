{"version":3,"sources":["webpack:///./x/marquee.ts","webpack:///webpack/startup"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,QAAS,SAAQ,WAAW;IAQhC;QACE,KAAK,EAAE,CAAC;QARV,iBAAkB,SAAS,EAAC,CAAC,qBAAqB;QAClD,0BAAqB;QAsCrB,kBAAU,GAAG,EAAE;YACb,MAAM,IAAI,GAAG,sCAAa,cAAc,CAAC,KAAK,CAAgB,CAAC;YAC/D,MAAM,KAAK,GAAG,sCAAa,cAAc,CAAC,MAAM,CAAgB,CAAC;YACjE,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;YAC1D,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,SAAS,IAAI,EAAE,CAAC,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;YACvD,MAAM,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC7B,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;YAC1B,0DAA0D;YAC1D,IAAI,MAAM,GAAG,CAAC,IAAI,SAAS,GAAG,CAAC,MAAM,EAAE;gBACrC,KAAK,CAAC,SAAS,GAAG,cAAc,IAAI,CAAC,WAAW,GAAG,CAAC,KAAK,CAAC;gBAC1D,2BAAI,UAAU,qBAAqB,CAAC,GAAG,EAAE;oBACvC,oBAAoB,CAAC,oCAAqB,CAAC,CAAC;oBAC5C,+CAAI,CAAU,CAAC;gBACjB,CAAC,CAAC,EAAC;aACJ;iBAAM;gBACL,KAAK,CAAC,SAAS,GAAG,cAAc,MAAM,GAAG,CAAC,KAAK,CAAC;gBAChD,2BAAI,UAAU,qBAAqB,CAAC,GAAG,EAAE;oBACvC,oBAAoB,CAAC,oCAAqB,CAAC,CAAC;oBAC5C,+CAAI,CAAU,CAAC;gBACjB,CAAC,CAAC,EAAC;aACJ;QACH,CAAC,EAAC;QAlDA,2BAAI,WAAW,IAAI,CAAC,YAAY,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,EAAC;QAEnD,MAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;QAEpD,MAAM,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;QAE9C,KAAK,CAAC,WAAW,GAAG;;;;;;;;;KASnB,CAAC;QAEF,QAAQ,CAAC,SAAS,GAAG;;;;;;KAMpB,CAAC;QAEF,sCAAa,WAAW,CAAC,KAAK,CAAC,CAAC;QAChC,sCAAa,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC;IAC7D,CAAC;IAlCD,MAAM,KAAK,kBAAkB;QAC3B,OAAO,CAAC,OAAO,CAAC,CAAC;IACnB,CAAC;IAyDM,iBAAiB;QACtB,IAAI,yCAAgB,SAAS,EAAE;YAC7B,MAAM,KAAK,GAAG,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACzC,IAAI,KAAK,EAAE;gBACR,sCAAa,cAAc,CAAC,KAAK,CAAiB,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC;aACzE;YACD,IAAI,CAAC,KAAK,EAAE,CAAC;SACd;IACH,CAAC;IAEM,oBAAoB;QACzB,0CAAiB;YACf,oBAAoB,sCAAa,CAAC;SACnC;IACH,CAAC;IAEM,wBAAwB,CAC7B,QAAgB,EAChB,MAAc,EACd,MAAc;QAEd,IAAI,QAAQ,KAAK,OAAO,EAAE;YACvB,sCAAa,cAAc,CAAC,KAAK,CAAiB,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC;SAC1E;IACH,CAAC;IAEM,eAAe,KAAI,CAAC;IAEpB,KAAK;QACV,MAAM,IAAI,GAAG,sCAAa,cAAc,CAAC,KAAK,CAAgB,CAAC;QAC/D,MAAM,KAAK,GAAG,sCAAa,cAAc,CAAC,MAAM,CAAgB,CAAC;QAEjE,MAAM,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC;QAE1B,KAAK,CAAC,SAAS,GAAG,MAAM,CAAC;IAC3B,CAAC;IAEM,IAAI;QACT,IAAI,yCAAgB,SAAS,EAAE;YAC7B,oBAAoB,sCAAa,CAAC;SACnC;IACH,CAAC;IAEM,KAAK;QACV,IAAI,yCAAgB,SAAS,EAAE;YAC7B,oBAAoB,sCAAa,CAAC;SACnC;QAED,+CAAI,CAAU,CAAC;IACjB,CAAC;CACF;;AAED,cAAc,CAAC,MAAM,CAAC,WAAW,EAAE,QAAQ,CAAC,CAAC;;;;;;;UCnH7C;UACA;UACA;UACA","file":"marquee.js","sourcesContent":["class XMarquee extends HTMLElement {\n  #timer?: number = undefined; // the internal timer\n  #shadow!: ShadowRoot;\n\n  static get observedAttributes() {\n    return [\"width\"];\n  }\n\n  constructor() {\n    super();\n\n    this.#shadow = this.attachShadow({ mode: \"open\" });\n\n    const template = document.createElement(\"template\");\n\n    const style = document.createElement(\"style\");\n\n    style.textContent = `\n#box {\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n#text {\n  display: inline-block;\n}\n    `;\n\n    template.innerHTML = `\n    <div id=\"box\">\n      <span id=\"text\">\n        <slot></slot>\n      </span>\n    </div>\n    `;\n\n    this.#shadow.appendChild(style);\n    this.#shadow.appendChild(template.content.cloneNode(true));\n  }\n\n  #scroll = () => {\n    const $box = this.#shadow.getElementById(\"box\") as HTMLElement;\n    const $text = this.#shadow.getElementById(\"text\") as HTMLElement;\n    const [textWidth] = [$text.offsetWidth, $box.offsetWidth];\n    const m = ($text.style.transform || \"\").match(/-?\\d+/);\n    const offset = m ? +m[0] : 0;\n    const style = $text.style;\n    // if scroll all content. Then reset position to the right\n    if (offset < 0 && textWidth < -offset) {\n      style.transform = `translateX(${$box.offsetWidth + 1}px)`;\n      this.#timer = requestAnimationFrame(() => {\n        cancelAnimationFrame(this.#timer as number);\n        this.#scroll();\n      });\n    } else {\n      style.transform = `translateX(${offset - 1}px)`;\n      this.#timer = requestAnimationFrame(() => {\n        cancelAnimationFrame(this.#timer as number);\n        this.#scroll();\n      });\n    }\n  };\n\n  public connectedCallback() {\n    if (this.#timer === undefined) {\n      const width = this.getAttribute(\"width\");\n      if (width) {\n        (this.#shadow.getElementById(\"box\") as HTMLElement).style.width = width;\n      }\n      this.start();\n    }\n  }\n\n  public disconnectedCallback() {\n    if (this.#timer) {\n      cancelAnimationFrame(this.#timer);\n    }\n  }\n\n  public attributeChangedCallback(\n    attrName: string,\n    oldVal: string,\n    newVal: string\n  ) {\n    if (attrName === \"width\") {\n      (this.#shadow.getElementById(\"box\") as HTMLElement).style.width = newVal;\n    }\n  }\n\n  public adoptedCallback() {}\n\n  public reset() {\n    const $box = this.#shadow.getElementById(\"box\") as HTMLElement;\n    const $text = this.#shadow.getElementById(\"text\") as HTMLElement;\n\n    const style = $text.style;\n\n    style.transform = `none`;\n  }\n\n  public stop() {\n    if (this.#timer !== undefined) {\n      cancelAnimationFrame(this.#timer);\n    }\n  }\n\n  public start() {\n    if (this.#timer !== undefined) {\n      cancelAnimationFrame(this.#timer);\n    }\n\n    this.#scroll();\n  }\n}\n\ncustomElements.define(\"x-marquee\", XMarquee);\n","// startup\n// Load entry module\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_modules__[17]();\n"],"sourceRoot":""}